(function(a){a.fn.simplecarousel=function(b){var c={width:170,height:120,vertical:false,auto:false,fade:false,current:0,items:0,slidespeed:600,visible:5,pagination:false,next:a(this).parent().find(".caro-next"),prev:a(this).parent().find(".caro-prev"),controls:true,deactivateNext:false,deactivatePrev:false};var d=a.extend(c,b);var e=a(this);console.log(this);var f=e.children("li");d.items=f.length;var g=d.height;var h=d.width;if(d.visible>1){if(d.vertical)g=g*d.visible;else h=h*d.visible}e.wrap('<div class="carousel-frame" style="width:'+h+"px;height:"+g+'px; overflow:hidden">');var i=e.parent(".carousel-frame");if(!d.vertical){e.width(d.items*d.width);e.height(d.height)}else{e.width(d.width);e.height(d.items*d.height)}e.css("overflow","hidden");f.each(function(b,c){a(c).width(d.width);a(c).height(d.height);if(!d.vertical)a(c).css("float","left");if(!d.controls){a(c).css("text-align","left")}});a(".cbox-cta").hide();d.prev.attr("disabled","disabled");a(".caro-prev").addClass("deactivate-prev");if(d.visible==d.items){d.prev.parent().remove();d.next.parent().remove()}else{d.prev.show();d.next.show()}if(d.items==d.visible){var j=a(this).find("li:last-child img").width();a(this).children("li:last-child").last().css("width",j);a(this).children("li").css("text-align","left");d.prev.parent().remove();d.next.parent().remove()}var k=function(a,b){if(typeof b=="undefined"&d.auto==false)return;if(a=="next"&&d.controls&&d.current!=d.items&&d.deactivateNext==false){d.current+=1;d.prev.removeAttr("disabled");d.prev.removeClass("deactivate-prev");console.log(d.current);if(d.current==d.items-d.visible){d.deactivateNext=true;d.deactivatePrev=false;d.next.attr("disabled","disabled");d.next.addClass("deactivate-next");console.log("far right")}else{d.deactivateNext=false}}else if(a=="prev"&&d.controls&&d.current!=d.items&&d.deactivatePrev==false&&d.current!=0){d.deactivateNext=false;d.current-=1;console.log(d.current);d.next.removeAttr("disabled");d.next.removeClass("deactivate-next");if(d.current==d.items-d.items){d.deactivatePrev=true;d.deactivateNext=false;d.prev.attr("disabled","disabled");d.prev.addClass("deactivate-prev");console.log("far left")}}else{e.stop().animate()}if(d.pagination!=false){i.next(".carousel-pagination").find("li").removeClass("carousel-pagination-active");i.next(".carousel-pagination").find("li:nth-child("+(d.current+1)+")").addClass("carousel-pagination-active")}if(d.fade!=false){e.fadeOut(d.fade,function(){e.css({marginLeft:-1*d.current*d.width});e.fadeIn(d.fade)})}else{if(!d.vertical)e.stop().animate({marginLeft:-1*d.current*d.width},d.slidespeed);else e.stop().animate({marginTop:-1*d.current*d.height},d.slidespeed)}if(typeof b!="undefined")d.auto=false;if(d.auto!=false)setTimeout(function(){k("next")},d.auto)};if(d.pagination!=false){i.after('<ul class="carousel-pagination"></ul>');var l=i.next(".carousel-pagination");for(var m=0;m<d.items;m++){if(m==0)l.append('<li class="carousel-pagination-active"></li>');else l.append("<li></li>")}l.find("li").each(function(b,c){a(this).click(function(){k(b,true)})})}if(d.next!=false)d.next.click(function(){k("next",true)});if(d.prev!=false)d.prev.click(function(){k("prev",true)});if(d.auto!=false)setTimeout(function(){k("next")},d.auto)}})(jQuery)